<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Painel do Usuário</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script type="module" src="supabase.js"></script>
<style>
body{font-family:Arial,sans-serif;background:#0f172a;color:#e5e7eb;padding:20px}
button{padding:10px 20px;background:#2563eb;color:#fff;border:none;border-radius:6px;cursor:pointer;margin-top:10px}
button:hover{background:#1d4ed8}
</style>
</head>
<body>
<h2>Painel do Usuário</h2>
<div id="saldo"></div>
<div id="planos"></div>
<button onclick="location.href='planos.html'">Ver Planos</button>

<script type="module">
import { supabase } from './supabase.js'

const session = JSON.parse(localStorage.getItem('session'))
document.getElementById('saldo').innerText = 'Saldo livre: R$ ' + session.saldoLivre

async function carregarPlanos(){
  const { data, error } = await supabase
    .from('planos')
    .select('*')
    .eq('user_id', session.id)
  if(data){
    let html = '<h3>Seus Planos:</h3>'
    data.forEach(p => {
      html += `<p>${p.nome} | Status: ${p.status} | Saldo: R$ ${p.saldo}</p>`
    })
    document.getElementById('planos').innerHTML = html
  }
}

carregarPlanos()
</script>
</body>
</html>
